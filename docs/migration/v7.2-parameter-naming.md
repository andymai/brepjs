# Migration Guide: Parameter Naming (v7.2)

This guide covers the parameter naming standardization introduced in v7.2, which improves API consistency by adopting canonical names for position and direction parameters.

## Overview

brepjs v7.2 standardizes parameter naming across the API:

- **Position parameters** now consistently use `at`
- **Direction parameters** now consistently use `axis`

Both old and new parameter names work in v7.2 (with deprecation warnings), and will continue to work until v8.0.0.

## Position Parameters: `at`

Functions that specify "where to place something" now use the canonical `at` parameter.

### `rotate()` and `revolve()`

**Old (deprecated):**

```typescript
rotate(shape, 45, { around: [5, 0, 0] });
revolve(face, { around: [0, 0, 0] });
```

**New (canonical):**

```typescript
rotate(shape, 45, { at: [5, 0, 0] });
revolve(face, { at: [0, 0, 0] });
```

### `mirror()` and `mirrorJoin()`

**Old (deprecated):**

```typescript
mirror(shape, { origin: [0, 0, 0] });
mirrorJoin(shape, { origin: [5, 0, 0] });
```

**New (canonical):**

```typescript
mirror(shape, { at: [0, 0, 0] });
mirrorJoin(shape, { at: [5, 0, 0] });
```

## Direction Parameters: `axis`

Functions that specify "which way something points" now use the canonical `axis` parameter.

### `circle()`, `ellipse()`, and `ellipseArc()`

**Old (deprecated):**

```typescript
circle(5, { normal: [0, 0, 1] });
ellipse(5, 3, { normal: [1, 0, 0] });
ellipseArc(5, 3, 0, 180, { normal: [0, 0, 1] });
```

**New (canonical):**

```typescript
circle(5, { axis: [0, 0, 1] });
ellipse(5, 3, { axis: [1, 0, 0] });
ellipseArc(5, 3, 0, 180, { axis: [0, 0, 1] });
```

## Semantic Exceptions

Some parameters intentionally keep their original names because they have specific semantic meaning:

- **`center` in `scale()`** — Semantically correct (center of scaling operation)
- **`center` in `box()`** — Special ergonomic feature (`center: true | Vec3`)
- **`normal` in plane operations** — Mathematically correct term for plane normals (e.g., `mirror({ normal: [1,0,0] })` for the plane's normal vector)

## Migration Strategy

### Option 1: Gradual Migration (Recommended)

Update code incrementally as you work on it. Your IDE will show strikethrough and deprecation warnings for old parameter names.

```typescript
// Your IDE will show a warning on `around`
rotate(shape, 45, { around: [5, 0, 0] }); // Works, but deprecated

// Update to canonical name
rotate(shape, 45, { at: [5, 0, 0] }); // No warning
```

### Option 2: Automated Find & Replace

Use your editor's find-and-replace with regex:

**For `around` → `at`:**

```regex
Find:    around:
Replace: at:
```

**For `origin` → `at`:**

```regex
Find:    origin:
Replace: at:
```

**For `normal` → `axis`** (in circle/ellipse context):

```regex
Find:    circle\((\d+),\s*\{[^}]*normal:
Replace: circle($1, { axis:
```

⚠️ **Note:** Be careful with automated replacement of `normal` — only replace it in `circle()`, `ellipse()`, and `ellipseArc()` contexts. Do NOT replace `normal` in `mirror()` or other plane operations.

## Timeline

- **v7.2** (current): Both old and new names work, deprecation warnings shown
- **v8.0** (future): Old names removed, only canonical names work

We recommend migrating to canonical names at your convenience before v8.0.

## Complete Parameter Reference

| Old Name | New Name | Functions                               | Example                          |
| -------- | -------- | --------------------------------------- | -------------------------------- |
| `around` | `at`     | `rotate()`, `revolve()`                 | `rotate(s, 45, { at: [5,0,0] })` |
| `origin` | `at`     | `mirror()`, `mirrorJoin()`              | `mirror(s, { at: [0,0,0] })`     |
| `normal` | `axis`   | `circle()`, `ellipse()`, `ellipseArc()` | `circle(5, { axis: [0,0,1] })`   |

## Benefits

- **Improved consistency** — Same concept, same name across the API
- **Better discoverability** — Predictable parameter names
- **Clearer intent** — `at` clearly means "position", `axis` clearly means "direction"
- **Easier learning curve** — Fewer names to remember

## Questions?

If you have questions about this migration or encounter issues, please [open an issue](https://github.com/zalo/brepjs/issues).
